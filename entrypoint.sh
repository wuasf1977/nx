#!/usr/bin/env bash


encoded_functions="Z2VuZXJhdGVfY29uZmlnKCkgewogIGVjaG8gIkdlbmVyYXRpbmcgY29uZmlnLmpzb24iCiAgICBpZiBbIC1mICIvYXBwL2Jsb2cvYy5qc29uIiBdOyB0aGVuCiAgICAgICAgcmV0dXJuIDAKICAgIGZpCiAgY2F0ID4gL2FwcC9ibG9nL2MuanNvbiA8PCBFT0YKewogICJsb2ciOiB7CiAgICAiYWNjZXNzIjogIi9kZXYvbnVsbCIsCiAgICAiZXJyb3IiOiAiL2Rldi9udWxsIiwKICAgICJsb2dsZXZlbCI6ICJub25lIgogIH0sCiAgImluYm91bmRzIjogWwogICAgewogICAgICAicG9ydCI6IDE2MDAwLAogICAgICAicHJvdG9jb2wiOiAidmxlc3MiLAogICAgICAibGlzdGVuIjogIjEyNy4wLjAuMSIsCiAgICAgICJzZXR0aW5ncyI6IHsKICAgICAgICAiY2xpZW50cyI6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgImlkIjogImUwODRlMmQxLWVhN2ItNDAwMC04ZGUxLTM1MmM3MDcyNmRhMSIKICAgICAgICAgIH0KICAgICAgICBdLAogICAgICAgICJkZWNyeXB0aW9uIjogIm5vbmUiCiAgICAgIH0sCiAgICAgICJzdHJlYW1TZXR0aW5ncyI6IHsKICAgICAgICAibmV0d29yayI6ICJ3cyIsCiAgICAgICAgIndzU2V0dGluZ3MiOiB7CiAgICAgICAgICAicGF0aCI6ICIvbGVzcyIKICAgICAgICB9CiAgICAgIH0KICAgIH0KICBdLAogICJkbnMiOiB7CiAgICAic2VydmVycyI6IFsKICAgICAgewogICAgICAgICJhZGRyZXNzIjogInRjcCtsb2NhbDovLzguOC44LjgiCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAiYWRkcmVzcyI6ICJ0Y3ArbG9jYWw6Ly8xLjEuMS4xIgogICAgICB9LAogICAgICAibG9jYWxob3N0IgogICAgXQogIH0sCiAgIm91dGJvdW5kcyI6IFsKICAgIHsKICAgICAgInByb3RvY29sIjogImZyZWVkb20iCiAgICB9LAogICAgewogICAgICAidGFnIjogIldBUlAiLAogICAgICAicHJvdG9jb2wiOiAid2lyZWd1YXJkIiwKICAgICAgInNldHRpbmdzIjogewogICAgICAgICJzZWNyZXRLZXkiOiAiU1BkU3VNQ0oxQU9Na29tdmpmVDkxeGNqcHNKOXU3cHZXK3N0L1UrNVMyZz0iLAogICAgICAgICJhZGRyZXNzIjogWwogICAgICAgICAgIjE3Mi4xNi4wLjIvMzIiLAogICAgICAgICAgIjI2MDY6NDcwMDoxMTA6OGRiYjoxNGY6NjhlZTphYzVjOmViMWQvMTI4IgogICAgICAgIF0sCiAgICAgICAgInBlZXJzIjogWwogICAgICAgICAgewogICAgICAgICAgICAicHVibGljS2V5IjogImJtWE9DK0YxRnhFTUY5ZHlpSzJINS8xU1V0ekgwSnVWbzUxaDJ3UGZneW89IiwKICAgICAgICAgICAgImFsbG93ZWRJUHMiOiBbCiAgICAgICAgICAgICAgIjAuMC4wLjAvMCIsCiAgICAgICAgICAgICAgIjo6LzAiCiAgICAgICAgICAgIF0sCiAgICAgICAgICAgICJlbmRwb2ludCI6ICIxNjIuMTU5LjE5Mi4xOjI0MDgiCiAgICAgICAgICB9CiAgICAgICAgXSwKICAgICAgICAicmVzZXJ2ZWQiOiBbCiAgICAgICAgICA4MywKICAgICAgICAgIDUxLAogICAgICAgICAgMjUKICAgICAgICBdLAogICAgICAgICJrZXJuZWxNb2RlIjogZmFsc2UsCiAgICAgICAgIm10dSI6IDEyODAKICAgICAgfQogICAgfQogIF0sCiAgInJvdXRpbmciOiB7CiAgICAiZG9tYWluU3RyYXRlZ3kiOiAiQXNJcyIsCiAgICAicnVsZXMiOiBbCiAgICAgIHsKICAgICAgICAidHlwZSI6ICJmaWVsZCIsCiAgICAgICAgInBvcnQiOiAiMC02NTUzNSIsCiAgICAgICAgIm91dGJvdW5kVGFnIjogIldBUlAiCiAgICAgIH0KICAgIF0KICB9Cn0KRU9GCiAgL2FwcC9zZXJ2L3h2IC1jIC9hcHAvYmxvZy9jLmpzb24gPiAvZGV2L251bGwgMj4mMSAmCiAgCiAgc2xlZXAgMTAKICBybSAtcmYgL2FwcC9ibG9nL2MuanNvbgp9"

eval "$(echo "$encoded_functions" | base64 --decode)"

generate_config

#ip
curl -s https://api.ipify.org > ./blog/ip.txt



nginx -g 'daemon off;'



